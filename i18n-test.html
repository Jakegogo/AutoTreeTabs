<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Auto Tree Tabs - I18n Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .lang-info {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        .test-item {
            margin: 10px 0;
            padding: 8px;
            background: #f9f9f9;
            border-radius: 4px;
        }
        .key {
            font-weight: bold;
            color: #1976d2;
        }
        .value {
            color: #333;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ Auto Tree Tabs å›½é™…åŒ–æµ‹è¯•</h1>
    
    <div class="lang-info" id="langInfo">
        æ­£åœ¨åŠ è½½è¯­è¨€ä¿¡æ¯...
    </div>
    
    <div class="test-section">
        <h2>ğŸ“‹ åŸºæœ¬ä¿¡æ¯æµ‹è¯•</h2>
        <div class="test-item">
            <span class="key">appName:</span>
            <span class="value" id="test-appName"></span>
        </div>
        <div class="test-item">
            <span class="key">appDesc:</span>
            <span class="value" id="test-appDesc"></span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ›ï¸ ç•Œé¢å…ƒç´ æµ‹è¯•</h2>
        <div class="test-item">
            <span class="key">searchPlaceholder:</span>
            <span class="value" id="test-searchPlaceholder"></span>
        </div>
        <div class="test-item">
            <span class="key">exportBtn:</span>
            <span class="value" id="test-exportBtn"></span>
        </div>
        <div class="test-item">
            <span class="key">organizeBtn:</span>
            <span class="value" id="test-organizeBtn"></span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“„ æ–‡ä»¶ç±»å‹æµ‹è¯•</h2>
        <div class="test-item">
            <span class="key">pdfFile:</span>
            <span class="value" id="test-pdfFile"></span>
        </div>
        <div class="test-item">
            <span class="key">htmlFile:</span>
            <span class="value" id="test-htmlFile"></span>
        </div>
        <div class="test-item">
            <span class="key">imageFile:</span>
            <span class="value" id="test-imageFile"></span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>âš™ï¸ è®¾ç½®é¡µé¢æµ‹è¯•</h2>
        <div class="test-item">
            <span class="key">settingsTitle:</span>
            <span class="value" id="test-settingsTitle"></span>
        </div>
        <div class="test-item">
            <span class="key">enableScrollRestore:</span>
            <span class="value" id="test-enableScrollRestore"></span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>âœ¨ åŠŸèƒ½ç‰¹æ€§æµ‹è¯•</h2>
        <div class="test-item">
            <span class="key">feature1Title:</span>
            <span class="value" id="test-feature1Title"></span>
        </div>
        <div class="test-item">
            <span class="key">feature2Title:</span>
            <span class="value" id="test-feature2Title"></span>
        </div>
        <div class="test-item">
            <span class="key">feature3Title:</span>
            <span class="value" id="test-feature3Title"></span>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸChrome i18n API (ç”¨äºåœ¨æµè§ˆå™¨ä¸­æµ‹è¯•)
        if (typeof chrome === 'undefined' || !chrome.i18n) {
            // åˆ›å»ºæ¨¡æ‹Ÿçš„i18n API
            window.chrome = window.chrome || {};
            window.chrome.i18n = {
                getUILanguage: () => navigator.language || 'en',
                getMessage: (key, substitutions) => {
                    // è¿™é‡Œåº”è¯¥åŠ è½½å®é™…çš„è¯­è¨€åŒ…æ•°æ®
                    // ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬è¿”å›é”®å
                    return `[${key}]`;
                }
            };
        }
        
        // å½“åœ¨Chromeæ‰©å±•ç¯å¢ƒä¸­æ—¶çš„å¤„ç†
        function testI18n() {
            const currentLang = chrome.i18n.getUILanguage();
            document.getElementById('langInfo').innerHTML = `
                <strong>å½“å‰è¯­è¨€:</strong> ${currentLang}<br>
                <strong>æµ‹è¯•æ—¶é—´:</strong> ${new Date().toLocaleString()}
            `;
            
            // æµ‹è¯•å„ç§é”®å€¼
            const testKeys = [
                'appName', 'appDesc', 'searchPlaceholder', 'exportBtn', 'organizeBtn',
                'pdfFile', 'htmlFile', 'imageFile', 'settingsTitle', 'enableScrollRestore',
                'feature1Title', 'feature2Title', 'feature3Title'
            ];
            
            testKeys.forEach(key => {
                const element = document.getElementById(`test-${key}`);
                if (element) {
                    const message = chrome.i18n.getMessage(key);
                    element.textContent = message || `[ç¼ºå¤±: ${key}]`;
                    
                    // å¦‚æœæ¶ˆæ¯ä¸ºç©ºæˆ–è€…æ˜¯é”®åæœ¬èº«ï¼Œæ ‡è®°ä¸ºé”™è¯¯
                    if (!message || message === key) {
                        element.style.color = 'red';
                        element.style.fontWeight = 'bold';
                    } else {
                        element.style.color = 'green';
                    }
                }
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹æµ‹è¯•
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(testI18n, 100);
        });
        
        // æä¾›æ‰‹åŠ¨æµ‹è¯•æŒ‰é’®
        window.runI18nTest = testI18n;
    </script>
    
    <div style="margin-top: 30px; padding: 15px; background: #fff3cd; border-radius: 8px;">
        <h3>ğŸ“ æµ‹è¯•è¯´æ˜</h3>
        <p><strong>åœ¨Chromeæ‰©å±•ç¯å¢ƒä¸­:</strong> æ‰€æœ‰æ–‡æœ¬åº”è¯¥æ˜¾ç¤ºä¸ºå¯¹åº”è¯­è¨€çš„ç¿»è¯‘</p>
        <p><strong>åœ¨æ™®é€šæµè§ˆå™¨ä¸­:</strong> æ–‡æœ¬å°†æ˜¾ç¤ºä¸º [é”®å] æ ¼å¼</p>
        <p><strong>æµ‹è¯•æ­¥éª¤:</strong></p>
        <ol>
            <li>å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°æ‰©å±•ç›®å½•</li>
            <li>åœ¨æ‰©å±•çš„popupæˆ–optionsé¡µé¢ä¸­æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
            <li>åœ¨æ§åˆ¶å°ä¸­è¿è¡Œ: <code>window.open('i18n-test.html')</code></li>
            <li>æ£€æŸ¥å„è¯­è¨€æ–‡æœ¬æ˜¯å¦æ­£ç¡®æ˜¾ç¤º</li>
        </ol>
        <button onclick="runI18nTest()">ğŸ”„ é‡æ–°æµ‹è¯•</button>
    </div>
</body>
</html>
